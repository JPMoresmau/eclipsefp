<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension
         point="net.sf.eclipsefp.haskell.ui.CabalChangeListener">
      <listener
            class="net.sf.eclipsefp.haskell.debug.ui.internal.launch.LaunchUpdater"
            id="net.sf.eclipsefp.haskell.debug.ui.listener2">
      </listener>
   </extension>
      <extension
         point="org.eclipse.core.runtime.adapters">
    <factory
    class="net.sf.eclipsefp.haskell.debug.ui.internal.debug.HaskellBreakpointAdapterFactory"
       adaptableType="net.sf.eclipsefp.haskell.ui.internal.editors.haskell.HaskellEditor">
       <adapter type="org.eclipse.debug.ui.actions.IToggleBreakpointsTarget"/>
    </factory>
    </extension>
      <extension
            point="org.eclipse.debug.ui.debugModelPresentations">
         <debugModelPresentation
               class="net.sf.eclipsefp.haskell.debug.ui.internal.debug.HaskellModelPresentation"
               id="net.sf.eclipsefp.haskell.debug">
         </debugModelPresentation>
      </extension>
      <extension
            point="org.eclipse.debug.ui.variableValueEditors">
         <variableValueEditor
               class="net.sf.eclipsefp.haskell.debug.ui.internal.debug.HaskellVariableValueEditor"
               modelId="net.sf.eclipsefp.haskell.debug">
         </variableValueEditor>
      </extension>
      <extension
            point="org.eclipse.debug.ui.toggleBreakpointsTargetFactories">
         <toggleTargetFactory
               class="net.sf.eclipsefp.haskell.debug.ui.internal.debug.HaskellToggleBreakpointTargetFactory"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.debug.HaskellToggleBreakpointTargetFactory">
            <enablement>
                       <with variable="debugContext">
              <iterate>
               <or>
                  <test property="org.eclipse.debug.ui.getModelIdentifier" value="net.sf.eclipsefp.haskell.debug"/>
                  <test property="org.eclipse.debug.ui.getModelIdentifier" value=""/>
               </or>
           </iterate>
           </with>
            <instanceof value="net.sf.eclipsefp.haskell.ui.internal.editors.haskell.HaskellEditor"/>
            </enablement>
         </toggleTargetFactory>
      </extension>
      <extension point="org.eclipse.ui.popupMenus">
	     <viewerContribution id="net.sf.eclipsefp.haskell.debug.ui.RulerPopupActions"
	                targetID="#TextRulerContext">
	
	      <action
	           id="net.sf.eclipsefp.haskell.ui.internal.editors.haskell.HaskellEditor.toggleBreakpointAction" label="%toggle_breakpoint"
	           class="org.eclipse.debug.ui.actions.RulerToggleBreakpointActionDelegate"
	           menubarPath="debug">
	     </action>
	</viewerContribution>   
	</extension>
      <extension
            point="org.eclipse.ui.editorActions">
         <editorContribution
               id="net.sf.eclipsefp.haskell.debug.ui.editorContribution1"
               targetID="net.sf.eclipsefp.haskell.ui.internal.editors.haskell.HaskellEditor">
         	    <action
	               label="%toggle_breakpoint"
	               class="org.eclipse.debug.ui.actions.RulerToggleBreakpointActionDelegate"
	               style="push"
	               actionID="RulerDoubleClick"
	               id="net.sf.eclipsefp.haskell.ui.internal.editors.haskell.HaskellEditor.doubleClickBreakpointAction"/>
         </editorContribution>
      </extension>

      <extension point="org.eclipse.debug.core.watchExpressionDelegates">
   		<watchExpressionDelegate
     		debugModel="net.sf.eclipsefp.haskell.debug"
     		delegateClass="net.sf.eclipsefp.haskell.debug.ui.internal.debug.HaskellWatchExpressionDelegate"/>
  	</extension>
      <extension
            point="org.eclipse.debug.ui.launchConfigurationTypeImages">
         <launchConfigurationTypeImage
               configTypeID="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.GhciInteractiveLaunchDelegate"
               icon="icons/etool16/ghci16.gif"
               id="net.sf.eclipsefp.haskell.ui.launch.young.launchInteractiveIcon">
         </launchConfigurationTypeImage>
         <launchConfigurationTypeImage
               configTypeID="net.sf.eclipsefp.haskell.debug.core.internal.launch.young.BaseExecutableLaunchDelegate"
               icon="icons/etool16/hsexe16.gif"
               id="net.sf.eclipsefp.haskell.ui.launch.young.launchExecutableIcon">
         </launchConfigurationTypeImage>
         <launchConfigurationTypeImage
               configTypeID="net.sf.eclipsefp.haskell.debug.core.internal.launch.young.ProfilingLaunchDelegate"
               icon="icons/etool16/hsexe16.gif"
               id="net.sf.eclipsefp.haskell.ui.launch.young.launchProfilingIcon">
         </launchConfigurationTypeImage>
         <launchConfigurationTypeImage
               configTypeID="net.sf.eclipsefp.haskell.debug.core.internal.launch.young.TestSuiteLaunchDelegate"
               icon="icons/etool16/hsexe16.gif"
               id="net.sf.eclipsefp.haskell.ui.launch.young.launchTestSuiteIcon">
         </launchConfigurationTypeImage>
      </extension>
      <extension
            point="org.eclipse.debug.ui.launchConfigurationTabGroups">
         <launchConfigurationTabGroup
               class="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.InteractiveLaunchTabGroup"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.InteractiveLaunchTabGroup"
               type="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.GhciInteractiveLaunchDelegate">
         </launchConfigurationTabGroup>
         <launchConfigurationTabGroup
               class="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.ExecutableLaunchTabGroup"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.ExecutableLaunchTabGroup"
               type="net.sf.eclipsefp.haskell.debug.core.internal.launch.young.BaseExecutableLaunchDelegate">
         </launchConfigurationTabGroup>
         <launchConfigurationTabGroup
               class="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.ExecutableLaunchTabGroup"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.ProfilingLaunchTabGroup"
               type="net.sf.eclipsefp.haskell.debug.core.internal.launch.young.ProfilingLaunchDelegate">
         </launchConfigurationTabGroup>
         <launchConfigurationTabGroup
               class="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.ExecutableLaunchTabGroup"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.TestSuiteLaunchTabGroup"
               type="net.sf.eclipsefp.haskell.debug.core.internal.launch.young.TestSuiteLaunchDelegate">
         </launchConfigurationTabGroup>
      </extension>
      <extension
            point="org.eclipse.debug.ui.launchShortcuts">
         <shortcut
               class="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.GhciInteractiveLaunchShortcut"
               icon="icons/etool16/ghci16.gif"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.GhciInteractiveLaunchShortcut"
               label="%ghciShortcut_label"
               modes="run, debug">
            <contextualLaunch>
               <enablement>
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <adapt
                              type="org.eclipse.core.resources.IResource">
                           <test
                                 property="net.sf.eclipsefp.haskell.core.isHaskellFile">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
               </enablement>
               <contextLabel
                     label="%ghciContextLabel_label"
                     mode="run">
               </contextLabel>
            </contextualLaunch>
         </shortcut>
      </extension>
      <extension
            point="org.eclipse.ui.navigator.viewer">
         <viewerActionBinding
               viewerId="org.eclipse.ui.navigator.ProjectExplorer">
            <includes>
               <actionExtension
                     pattern="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.RunActionProvider">
               </actionExtension>
            </includes>
         </viewerActionBinding>
      </extension>
      <extension
            point="org.eclipse.ui.navigator.navigatorContent">
         <actionProvider
               class="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.RunActionProvider"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.RunActionProvider">
            <enablement>
               <instanceof
                     value="net.sf.eclipsefp.haskell.ui.internal.views.projectexplorer.ProjectExplorerStanza">
               </instanceof>
            </enablement>
         </actionProvider>
      </extension>
      <extension
            point="org.eclipse.debug.core.launchConfigurationTypes">
         <launchConfigurationType
               delegate="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.GhciInteractiveLaunchDelegate"
               id="net.sf.eclipsefp.haskell.debug.ui.internal.launch.young.GhciInteractiveLaunchDelegate"
               modes="run,debug"
               name="%haskellInteractiveLaunchType_name"
               sourceLocatorId="net.sf.eclipsefp.haskell.debug.core.sourceLookupDirector"
               sourcePathComputerId="net.sf.eclipsefp.haskell.debug.core.sourcePathComputer">
         </launchConfigurationType>
      </extension>
      
</plugin>
